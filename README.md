# Communist Consensus 去中心化决策系统(TODO)

基于 Libp2p，HotStuffBFT，Aggregated Distributed Key Gerenation，IPFS，Electron 实现的一套 Proof of Human 的去中心化决策系统。

## 特性

### 完全的去中心化

* 不依赖特定硬件及操作系统
* 不依赖特定的 ISP，DNS ，IP 地址
* 不依赖其他区块链
* 节点的共识过程中不产生主从节点并且共识权重相同

### 高自由度的民主决策

* 决策系统本身可通过民主决策实现自身的升级
* 支持动态节点

## 安全以及性能

### 安全假设

#### 网络
* ISP 提供中立的网络服务
* 半异步网络

#### 恶意节点

* 可拒绝响应或部分延迟响应
* 可延迟转发或部分延迟转发
* 可发送误导信息，对不同节点发送不同的信息
* 无法伪造签名
* 无法生成特定的哈希值

### 性能指标

* 容忍至多 1 / 3 静态恶意节点
* 区块的生成最少需要 2 / 3 节点同时在线
* Distributed Key Generation 通信复杂度和计算取决于 Aggregated DKG
* 共识复杂度取决于 HotStuff

### 对比
|Framework|proposer-selection|dynamic peers|
|---|---|---|
|Tendermint|round-robin|x|
|ezBFT|
|IBFT|round-robin|x|
SBFT
PBFT
Zyzzyva

## 民主决策过程
![image](https://user-images.githubusercontent.com/11901882/185021696-b48ccff1-3b28-48cc-ac47-2377bf8e7476.png)

关于议题的产生与执行如图所示。议题的生命周期分为四个阶段：发起议题或参与议题，（子）会议内讨论与投票，公示阶段，执行阶段。在发起议题后，议题进入所属议题域的等待队列中。议题按照不同领域分类，每个议题域中参与者最多的议题将被激活进入会议流程。议题域的变更由相应议题和相应的智能合约实现。

成员可以在公示以前任何阶段参与议题。参与议题时需要提供期望的会议时间窗口、期望公示时间窗口，通过这些期望时间的平均值得出截止时间。另外还需要提供期望子会议容量，会议人数如果超过平均期望会议容量，将拆分为若干个子会议。这些子会议中在选出胜出的方案后进入新的一轮讨论与投票，如果候选方案胜出者仍然超过平均期望会议容量，将再次拆分，如此反复直到选出最终方案。

在（子）会议截止前，投票人可对多个方案进行投票，票数最多的方案胜出。最后一轮投票胜出的方案在公示期后由智能合约执行，取代传统的执行机制和监督机制。即成员只有发言权和表决权，无执行权。智能合约是唯一的且执法者或执行者，保证议题在执行阶段的公平和效率。

为防止具有破坏性的议题的执行，采用以下策略：

（1） 最小公示期与最终方案支持者人数占总人数的比例成反比，以此增加领域专家参与会议的概率。

（2） 成员可以对可疑人员提出质疑，如果议题通过，可疑人员将从组织中移除。

（3） 冷静机制：成员可以在公示期冻结议题，同时该成员也进入冻结状态。等待其他成员的评估，解除冻结或取消议题。

由于当前数字化程度不高，许多场景无法直接应用智能合约（例如注册企业）。在这数字化过渡期，这些特殊的场景中仍然需要选举出执行代表，选举过程与提案过程相同。任何领域和过程尽可能使用民主决策，如果暂时无法实现，必须给出具体条件，当满足条件的时候立即转换为民主决策（此规则也可使用智能合约编写）。

## 应用层功能

* 成员
  * 提出议题
  * 参与议题讨论
      * 提出方案
      * 参与方案投票
* 议题的产生
    * 动态领域
    * 动态议题池
* 议题的决策
    * 议题讨论
    * 议题投票
    * 子会议划分

## 议题的状态 
* 无效
* 未激活
* 讨论与投票
* 公示中
* 执行中
* 冻结
* 完成(成功)
* 完成(失败)

## 任务类型 
* 执行脚本
  * 新增投票类型
  * 通用任务
  * ...
* 领域／子领域的增加删除修改
* 成员的增加和删除
* 解冻提议

# 行为
* 发起议题
  * 投票类型
    * 多选一(输出提案id)
    * 对一组对象评分(输出评分表)
* 参与提议
* 议题投票
* 提案
  * 任务类型
* 会议发言
* 冻结议题

行为组 一位成员的多个行为
行为块 多个成员的行为组
最小广播行为时期 = t

排序规则
  按hash升序排序，算出排序后的集合的hash并作为排序种子再次进行排序
延长时间
  随延时次数指数增加B = (2^n)*t

      聚合签名 bls schnorr ecdsa
      zilliqa

模拟器
  吞吐量
  测试

云服务器
  主账户
    所有权限
  子账户
    只读ECS配置（初始化脚本）
  创建的ECS安全组策略禁止ssh登录

  DB
    TiDB
